# 21장 메시지 큐를 이용한 비동기 통신

api 말고, 컴포넌트 끼리 직접 주고받는 대신 메시지 큐를 둬서 컴포넌트간의 결합을 느슨하게 하는 효과가 있다.

## 21.1 비동기 메시징이란?

api같은 동기적 통신은 서버가 다운돼거나 기능을 상실하거나 타임아웃 시간이 만료될 수 있다. 이는 큰 장애로 이어질 수 있다. 비동기 통신을 적용하면 클라이언트와 서버 사이에 계층이 하나 끼고, 클라이언트는 큐로, 서버는 큐를 주시하다 메시지를 수신하고 처리한다. 

메시징은 매력적인 수단이지만 몇가지 문제가 있따.

1. 큐를 제공하는 기술의 신뢰성이 뛰어나야함
2. 큐의 사용료
3. 다양한 프로파일에서의 큐 유지

## 21.5 비동기 메시징 패턴 이해하기

pub-sub 패턴에 적합하지 않은 경우는 퍼블리셔가 메시지를 사용하는것이 누구이고 어떻게 처리하며 언제 끝나는지 필요하면 이 패턴을 쓸 수 없다. 이는 request-response패턴에서 적합하다. 

이 패턴에서는 클라이언트 -> 메시지큐 -> 처리 핸들러 -> 응답 메시지 큐 -> 클라이언트 로 처리하는 방식이다. 

대부분 메시지 큐 기술은 fire-and-forget (보내고 신경 끔)을 사용하는것에 적합하다. 

* 이해가 잘 안되는데 일반적인 api에서 처음 클라이언트의 요청을 게속 묶고있는건가? 기술적으로 가능해도 응답이 매우 느릴텐데. 